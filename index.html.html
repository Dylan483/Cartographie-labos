<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Cartographie des laboratoires</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      background-color: #f2f4f7;
    }

    h2 {
      text-align: center;
      margin: 20px 0 5px 0;
      color: #2c3e50;
    }

    .subtitle {
      text-align: center;
      font-style: italic;
      color: #666;
      margin-bottom: 15px;
    }

    /* ğŸ”¹ Layout global */
    .container {
      display: flex;
      height: calc(100vh - 110px);
      padding: 0 15px 15px 15px;
      box-sizing: border-box;
    }

    /* ğŸ”¹ Carte Ã  gauche */
    #map {
      flex: 2;
      margin-right: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    /* ğŸ”¹ Panneau Ã  droite */
    #info-panel {
      flex: 1;
      padding: 18px;
      border-radius: 10px;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      overflow-y: auto;
    }

    /* ğŸ”¹ Titre ville centrÃ© */
    #info-panel h3 {
      margin-top: 0;
      color: #34495e;
      text-align: center;              /* ğŸ‘ˆ centrÃ© */
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 6px;
    }

    /* ğŸ”¹ Ligne dâ€™icÃ´nes dÃ©co */
    .icons-row {
      text-align: center;
      font-size: 1.4em;
      margin-bottom: 10px;
    }

    /* ğŸ”¹ Bloc labo */
    .labo-block {
      margin-bottom: 14px;
      padding: 10px;
      background: #f9fbfd;
      border-radius: 8px;
      border-left: 4px solid #4a90e2;
      text-align: center;
    }

    .labo-block strong {
      display: block;
      text-align: center;
      color: #2c3e50;
      margin-bottom: 4px;
    }

    .labo-block span {
      color: #555;
      font-size: 0.95em;
    }

    /* ğŸ”¹ IcÃ´ne devant chaque labo */
    .labo-icon {
      font-size: 1.2em;
      margin-right: 4px;
    }
  </style>
</head>

<body>

  <h2>Cartographie des laboratoires</h2>
  <p class="subtitle">Cliquez sur une ville pour afficher les laboratoires.</p>

  <div class="container">
    <div id="map"></div>
    <div id="info-panel">
      <h3>Informations</h3>
      <div class="icons-row">ğŸŒ ğŸ”¬ ğŸ¶ ğŸ±</div>
      <p style="text-align:center;">SÃ©lectionnez une ville sur la carte.</p>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    /* =========================
       1ï¸âƒ£ CARTE BIEN CADRÃ‰E FRANCE
    ========================= */

    const map = L.map('map').setView([46.7, 1.8], 6);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    /* =========================
       2ï¸âƒ£ DONNÃ‰ES
    ========================= */

    const villes = [
      {
        ville: "Paris",
        lat: 48.85661342,
        lon: 2.35222190,
        laboratoires: [
          { nom: "Proteom'ic", domaine: "Biologie molÃ©culaire" },
        ]
      },
      {
        ville: "Toulouse",
        lat: 43.60465221,
        lon: 1.44420910,
        laboratoires: [
          { nom: "ProteoToul", domaine: "Chimie analytique" },
        ]
      },
      {
        ville: "Strasbourg",
        lat: 48.57340561,
        lon: 7.75211109,
        laboratoires: [
          { nom: "IGBMC Plateforme ProtÃ©omique", domaine: "Immunologie" },
	  { nom: "PSGE", domaine: "A dÃ©finir" }
        ]
      },
      {
        ville: "Rennes",
        lat: 48.11726683,
        lon: -1.67779262,
        laboratoires: [
          { nom: "Protim Rennes", domaine: "Biotechnologies" }
        ]
      },
      {
	ville: "Marseille",
	lat: 43.311936197614095,
	lon: 5.366800538914962,
	laboratoires: [
	  {nom: "Marseille ProtÃ©omique", domaine: "A dÃ©finir" }
	]
      },
      {
	ville: "Bordeaux",
	lat: 44.84573875115448,
	lon: -0.5784620222740504,
	laboratoires: [
	  {nom: "Bordeaux Proteome", domaine: "A dÃ©finir" }
	]
      },
      {
	ville: "Dijon",
	lat: 47.3215806,
	lon: 5.0414701,
	laboratoires: [
	  {nom: "FILAB", domaine: "A dÃ©finir" }
	]
      },
      {
	ville: "Montpellier",
	lat: 43.6112422,
	lon: 3.8767337,
	laboratoires: [
	  {nom: "PÃ´le ProtÃ©ome Montpellier", domaine: "A dÃ©finir" }
	]
      },
      {
	ville: "Clermont-Ferrand",
	lat: 45.7774551,
	lon: 3.0819427,
	laboratoires: [
	  {nom: "PFEM", domaine: "A dÃ©finir" }
	]
      },
      {
	ville: "Grenoble",
	lat: 45.1875602,
	lon: 5.7357819,
	laboratoires: [
	  {nom: "Grenoble Proteomics (EDyP)", domaine: "A dÃ©finir" }
	]
      },
      {
	ville: "Lyon",
	lat: 45.7578137,
	lon: 4.8320114,
	laboratoires: [
	  {nom: "PSF Lyon", domaine: "A dÃ©finir" }
	]
      },
    ];

    /* =========================
       3ï¸âƒ£ PANNEAU DROIT
    ========================= */

    const infoPanel = document.getElementById("info-panel");

    /* =========================
       4ï¸âƒ£ PINS â†’ AFFICHAGE Ã€ DROITE
    ========================= */

    villes.forEach(ville => {

      const marker = L.marker([ville.lat, ville.lon]).addTo(map);

      marker.on("click", () => {

        let html = `
          <h3>${ville.ville}</h3>
          <div class="icons-row">ğŸŒ ğŸ”¬ ğŸ¶ ğŸ±</div>
        `;

        ville.laboratoires.forEach(labo => {
          html += `
            <div class="labo-block">
              <strong>
                <span class="labo-icon">ğŸ”¬</span>${labo.nom}
              </strong>
              <span>${labo.domaine}</span>
            </div>
          `;
        });

        infoPanel.innerHTML = html;
      });
    });

  </script>

</body>
</html>
